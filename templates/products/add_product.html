{# templates/products/add_product.html #}
{% extends 'base.html' %}
{% block title %}Add Product{% endblock %}
{% block content %}
<div class="max-w-3xl mx-auto">
  <div class="card bg-base-100 shadow-md">
    <div class="card-body">
      <h2 class="text-xl font-semibold mb-4">Add New Product</h2>

      {% if messages %}
        {% for m in messages %}
          <div class="alert {% if m.tags %}alert-{{ m.tags }}{% endif %} mb-4">
            {{ m }}
          </div>
        {% endfor %}
      {% endif %}

      <form method="post" novalidate>
        {% csrf_token %}

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="label"><span class="label-text">Name</span></label>
            <input type="text" name="{{ form.name.html_name }}" value="{{ form.name.value|default:'' }}"
                   class="input input-bordered w-full" placeholder="Product name" required>
            {% if form.name.errors %}<p class="text-sm text-error">{{ form.name.errors.0 }}</p>{% endif %}
          </div>

          <div>
            <label class="label"><span class="label-text">Category</span></label>
            <select name="{{ form.category.html_name }}" class="select select-bordered w-full" required>
              <option value="">-- Select category --</option>
              {% for c in form.category.field.queryset %}
                <option value="{{ c.id }}" {% if c.id|stringformat:"s" == form.category.value|stringformat:"s" %}selected{% endif %}>{{ c.name }}</option>
              {% endfor %}
            </select>
            {% if form.category.errors %}<p class="text-sm text-error">{{ form.category.errors.0 }}</p>{% endif %}
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
          <div>
            <label class="label"><span class="label-text">Stock</span></label>
            <input type="number" name="{{ form.stock.html_name }}" value="{{ form.stock.value|default:'0' }}" min="0" class="input input-bordered w-full">
            {% if form.stock.errors %}<p class="text-sm text-error">{{ form.stock.errors.0 }}</p>{% endif %}
          </div>

          <div>
            <label class="label"><span class="label-text">Notify Quantity</span></label>
            <input type="number" name="{{ form.quantity.html_name }}" value="{{ form.quantity.value|default:'' }}" min="0" class="input input-bordered w-full">
            {% if form.quantity.errors %}<p class="text-sm text-error">{{ form.quantity.errors.0 }}</p>{% endif %}
          </div>

          <div>
            <label class="label"><span class="label-text">Date</span></label>
            <input type="date" name="{{ form.date.html_name }}" value="{{ form.date.value|date:'Y-m-d' }}" class="input input-bordered w-full">
            {% if form.date.errors %}<p class="text-sm text-error">{{ form.date.errors.0 }}</p>{% endif %}
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
          <div>
            <label class="label"><span class="label-text">Buying Price (Purchase)</span></label>
            <input type="number" step="0.01" min="0" name="{{ form.buying_price.html_name }}" value="{{ form.buying_price.value|default:'' }}" class="input input-bordered w-full" required>
            {% if form.buying_price.errors %}<p class="text-sm text-error">{{ form.buying_price.errors.0 }}</p>{% endif %}
          </div>

        <!--   <div>
            <label class="label"><span class="label-text">Selling Price</span></label>
            <input type="number" step="0.01" min="0" name="{{ form.selling_price.html_name }}" value="{{ form.selling_price.value|default:'' }}" class="input input-bordered w-full" required>
            {% if form.selling_price.errors %}<p class="text-sm text-error">{{ form.selling_price.errors.0 }}</p>{% endif %}
          </div>
        </div> -->

        <!-- <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
          <div>
            <label class="label"><span class="label-text">Company</span></label>
            <input type="text" name="{{ form.company.html_name }}" value="{{ form.company.value|default:'' }}" class="input input-bordered w-full">
          </div>

          <div>
            <label class="label"><span class="label-text">Barcode</span></label>
            <input type="text" name="{{ form.barcode.html_name }}" value="{{ form.barcode.value|default:'' }}" class="input input-bordered w-full">
          </div>
        </div> -->

        <div class="flex justify-end gap-2 mt-6">
          <a href="{% url 'products:product_list' %}" class="btn btn-ghost">Cancel</a>
          <button type="submit" class="btn btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
